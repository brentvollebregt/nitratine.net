<!DOCTYPE html>

<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="/static/img/favicon.ico" rel="shortcut icon"/>
<link href="/static/img/favicon-384x384.png" rel="icon" sizes="384x384" type="image/png"/>
<link href="/static/img/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><meta content="#343a40" name="theme-color"/><link href="https://nitratine.net/blog/post/how-to-pass-secrets-between-runners-in-github-actions/" rel="canonical"/>
<link href="/rss.xml" rel="alternate" title="RSS Feed for nitratine.net" type="application/rss+xml"/>
<link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" rel="stylesheet"/>
<link href="/static/css/base.css" rel="stylesheet"/><!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EB27CZP773"></script>
<script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-EB27CZP773');
          gtag('config', 'UA-117153268-2');
        </script><!-- instant.page -->
<script defer="" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU" src="https://instant.page/1.2.2" type="module"></script>
<!-- lazysizes -->
<script async="" src="/static/js/lazysizes.min.js"></script>
<title>How to Pass Secrets Between Runners in GitHub Actions - Nitratine</title>
<link href="/static/css/pygments.css" rel="stylesheet"/>
<meta content="When trying to pass a secret or masked variable between jobs in GitHub Actions using outputs, it will say &quot;Warning: Skip output '' since it may contain secrets&quot;. This tutorial aims to provide a reasonable solution for this." name="description"/>
<meta content="Brent Vollebregt" name="author"/>
<meta content="How to Pass Secrets Between Runners in GitHub Actions" property="og:title"/>
<meta content="When trying to pass a secret or masked variable between jobs in GitHub Actions using outputs, it will say &quot;Warning: Skip output '' since it may contain secrets&quot;. This tutorial aims to provide a reasonable solution for this." property="og:description"/>
<meta content="/posts/how-to-pass-secrets-between-runners-in-github-actions/feature.png" property="og:image"/>
<meta content="https://nitratine.net/blog/post/how-to-pass-secrets-between-runners-in-github-actions/" property="og:url"/>
<meta content="summary" name="twitter:card"/><script async="" data-ad-client="ca-pub-6407227183932047" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<link href="/static/css/blog.css" rel="stylesheet"/>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
<div class="container">
<a class="navbar-brand" href="/">
<img alt="Brand Icon" class="d-inline-block align-top" height="30" src="/static/img/logo.png" width="145"/>
</a>
<button aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbar" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse justify-content-between" id="navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item">
<a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
</li>
<li class="nav-item">
<a class="nav-link" href="/blog/">Blog</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://www.youtube.com/PyTutorials">YouTube</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://github.com/brentvollebregt">GitHub</a>
</li>
<li class="nav-item">
<a class="nav-link" href="/about/">About</a>
</li>
</ul>
</div>
</div>
</nav>
<!-- Main Content -->
<div class="container my-4">
<div class="row">
<main class="col-blog-content blog-main">
<h1 class="blog-post-title">How to Pass Secrets Between Runners in GitHub Actions</h1>
<div class="mb-2">
<a class="text-muted" href="/blog/archive/#2022">15 Jun 2022</a>
<a class="badge badge-primary ml-2" href="/blog/categories/#Tutorials">Tutorials</a>
<a class="badge badge-warning" href="/blog/tags/#github">github</a>
<span class="ml-2"></span>
<span class="text-muted text-nowrap">5 min read</span>
<span class="ml-2"></span>
<img alt="Hits" class="post-hits" src="https://hitcounternitratine.pythonanywhere.com/count/tag.svg?url=https%3A%2F%2Fnitratine.net%2Fblog%2Fpost%2Fhow-to-pass-secrets-between-runners-in-github-actions%2F"/>
</div>
<p class="lead">When trying to pass a secret or masked variable between jobs in GitHub Actions using outputs, it will say "Warning: Skip output '' since it may contain secrets". This tutorial aims to provide a reasonable solution for this.</p>
<hr class="mt-3 mb-0"/>
<div class="post-content mt-3">
<div class="toc">
<ul>
<li><a href="#the-issue">The Issue</a><ul>
<li><a href="#my-problematic-scenario">My Problematic Scenario</a></li>
</ul>
</li>
<li><a href="#the-solution">The Solution</a><ul>
<li><a href="#example">Example</a></li>
<li><a href="#github-action-helper">GitHub Action Helper</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="the-issue">
<span style="position:relative"><a class="anchor" href="#the-issue"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>The Issue</span></h2>
<p>When trying to pass a secret or masked variable between jobs in GitHub Actions using outputs, it will say <em>"Warning: Skip output '' since it may contain secrets"</em>. GitHub states in their <a href="https://docs.github.com/en/actions/using-jobs/defining-outputs-for-jobs#overview">"Defining outputs for jobs" docs</a>:</p>
<blockquote>
<p>Job outputs containing expressions are evaluated on the runner at the end of each job. Outputs containing secrets are redacted on the runner and not sent to GitHub Actions.</p>
</blockquote>
<h3 id="my-problematic-scenario">
<span style="position:relative"><a class="anchor" href="#my-problematic-scenario"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>My Problematic Scenario</span></h3>
<p>In my scenario, I have a job that deploys my infrastructure and then passes deployment keys to other jobs so they can run in parallel. Here is a small example of the flow:</p>
<p><img alt="Flow Example" class="lazyload blur-up" data-src="/posts/how-to-pass-secrets-between-runners-in-github-actions/flow-example.png" height="132" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAA4AAAAFCAYAAAB1j90SAAAAwUlEQVR4nG3OzU7CQBSA0W/q/FBqqaDIwp3v/y4+gwuCGoLQIbWd3pnrwrgw8TzBMapZwfBDgQoRQUSYRQjec4yZ82gZh4gPNdZarBxeGL5mMOCtoVo9cU4L5jRhnYOSEalI00y8fFI3M93dBqtjz/v+SM6Z3cOK5XJD1+0I3vGrCiAmsV0/k0tBi2BK//qnOlFzumZKFoypWARHFE8/3vDxtqdpWu63jxhVVf5RSmFKiZKFmByH08Q4XHHec9u2fANoEmRdL1CSuAAAAABJRU5ErkJggg==" style="; aspect-ratio: 382/132; height: auto;" width="382"/></p>
<p>My infrastructure job looks a bit like this:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>

<span class="w">  </span><span class="nt">deploy-infrastructure</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Deploy</span><span class="nv"> </span><span class="s">Infrastructure"</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">windows-latest</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">deployment_key_for_api</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.set_outputs.outputs.deployment_key_for_api }}</span>
<span class="w">      </span><span class="nt">deployment_key_for_client</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.set_outputs.outputs.deployment_key_for_client }}</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@main</span>

<span class="w">      </span><span class="c1"># ...</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set outputs</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">set_outputs</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">$deployment_key_for_api = "Method of obtaining this has been removed for simplicity..."</span>
<span class="w">          </span><span class="no">echo "::add-mask::$deployment_key_for_api"</span>
<span class="w">          </span><span class="no">echo "::set-output name=deployment_key_for_api::$deployment_key_for_api"</span>

<span class="w">          </span><span class="no">$deployment_key_for_client = "Method of obtaining this has been removed for simplicity..."</span>
<span class="w">          </span><span class="no">echo "::add-mask::$deployment_key_for_client"</span>
<span class="w">          </span><span class="no">echo "::set-output name=deployment_key_for_client::$deployment_key_for_client"</span>
</code></pre></div>
<p>And one of the jobs that uses this output looks like:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>

<span class="w">  </span><span class="nt">deploy-server</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Deploy</span><span class="nv"> </span><span class="s">Server"</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy-infrastructure</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">windows-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@main</span>

<span class="w">      </span><span class="c1"># ...</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Get Deploy Key</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_deploy_key</span>
<span class="w">        </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">$deployment_key="${{ needs.deploy-infrastructure.outputs.deployment_key_for_api }}"</span>
<span class="w">          </span><span class="no">echo "::add-mask::$deployment_key"</span>
<span class="w">          </span><span class="no">echo "::set-output name=deployment_key::$deployment_key"</span>

<span class="w">      </span><span class="c1"># Uses ${{ steps.get_deploy_key.outputs.deployment_key }} later...</span>
</code></pre></div>
<p>You would have seen that I'm using <code>::add-mask::</code> above - this is used to stop GitHub Actions logs showing my secrets. Unfortunately once a mask is applied to a value, that value cannot be passed between runners.</p>
<p>Since each job runs on their own "runner" (a completely different VM / agent), outputs are passed back to GitHub Actions which are then passed back to the runner for the new job that needs them. Since I'm trying to pass a secret / masked value using outputs, the runner will redact any outputs containing secrets and not send them to GitHub Actions (as stated in the GitHub docs) to be passed on to the next job.</p>
<p>This is the warning I see:</p>
<p><img alt="GitHub Actions skip because of secret/mask" class="lazyload blur-up" data-src="/posts/how-to-pass-secrets-between-runners-in-github-actions/ga-skip-because-of-secret.png" height="192" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAA8AAAAFCAIAAAAVLyF7AAAAhElEQVR4nG2NsRaCMBAEd5MgCjZS2Pn/H2heJPHu1oLChulnhtvz9di20bukWt8hESSJM0prVYpSiiBIOSV3630QJwKRZuZpXVcPn3IBERGf1nwM/A8CCIDX27LM+b5cuqeUylGQMPpuZiQFHB93KyENi32EBYQvII9wM5AKAQJAEkJIP2/uUwEyDYuaAAAAAElFTkSuQmCC" style="; aspect-ratio: 593/192; height: auto;" width="593"/></p>
<p>And here is my value missing in the later job:</p>
<p><img alt="GitHub Actions skip leads to an empty value" class="lazyload blur-up" data-src="/posts/how-to-pass-secrets-between-runners-in-github-actions/ga-skip-leads-to-empty-value.png" height="90" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAA8AAAADCAIAAADDdsJmAAAAXElEQVR4nCXMyRGEQAwEwS4dA4/131U2BiTxwIBM4viZubtVda6cLmFAdwNVFR57b4P7ucPdJa3jrOeuLjBJBuYhJAkjVwJAdHdVrbMjMlnX//omYKSZkT6lmXkBwGcsPOxTn0MAAAAASUVORK5CYII=" style="; aspect-ratio: 503/90; height: auto;" width="503"/></p>
<h2 id="the-solution">
<span style="position:relative"><a class="anchor" href="#the-solution"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>The Solution</span></h2>
<p>While looking for a solution, I found <a href="https://github.com/actions/runner/issues/1498">this GitHub issue</a> which gave me the idea of encrypted secrets being passed between runners/jobs.</p>
<p>Pretty much the idea is to symmetrically encrypt the secret/masked value using PGP in the source runner and decrypt it in the destination runner. This means you can still mask the value from the logs but the actual value being passed around is not the masked value.</p>
<p>Before you can symmetrically encrypt/decrypt a value with PGP, you need a passphrase. We can't generate this on the go as passing it to the next job would mean it either shows in the logs, or can't be sent over as it is masked! An easy way around this is to create a secret in GitHub Actions for the repo that is to be used only for this task - something like "<code>PGP_SECRET_SIGNING_PASSPHRASE</code>".</p>
<p>To encrypt a value in bash, we can use:</p>
<div class="codehilite"><pre><span></span><code>encrypted_value=$(gpg --symmetric --batch --passphrase "SECRET" --output - &lt;(echo "my-secret-string") | base64 -w0)
</code></pre></div>
<p>You hopefully have noticed a couple of things above:</p>
<ul>
<li>This is being assigned to a variable - so you can set it as an output</li>
<li>"<code>--output -</code>"? - this outputs the encrypted value to stdout which is picked up the by "$()"</li>
<li>"<code>&lt;</code>"? - this redirects the value being echoed into stdin (to be encrypted)</li>
<li>"<code>| base64 -w0</code>"? - this outputs the encrypted value to base64 without any line breaks (so we aren't just passing bytes that may break across runners)</li>
</ul>
<p>To decrypt the above value, we can then use:</p>
<div class="codehilite"><pre><span></span><code>decrypted_value=$(gpg --decrypt --quiet --batch --passphrase "SECRET" --output - &lt;(echo "$encrypted_value" | base64 --decode))
</code></pre></div>
<p>Using the two commands above together, you should see "my-secret-string" when executing "<code>echo $decrypted_value</code>".</p>
<p>So the steps to solve this issue are:</p>
<ol>
<li>Create a new secret with your PGP signing key (e.g. <code>PGP_SECRET_SIGNING_PASSPHRASE</code>)</li>
<li>Encrypt the output in the source job</li>
<li>Decrypt the output of the dependant job in the destination job</li>
</ol>
<h3 id="example">
<span style="position:relative"><a class="anchor" href="#example"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Example</span></h3>
<p>Here is an example of how I performed these steps between jobs.</p>
<p>First, I defined a secret in GitHub Actions called <code>PGP_SECRET_SIGNING_PASSPHRASE</code> with a long random value that I will never need to see again.</p>
<p>Then I updated my pipeline to encrypt my secrets before using them as outputs:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">deploy-infrastructure</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Deploy</span><span class="nv"> </span><span class="s">Infrastructure"</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">windows-latest</span>
<span class="w">    </span><span class="nt">outputs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">deployment_key_for_api_encrypted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.set_outputs.outputs.deployment_key_for_api_encrypted }}</span>
<span class="w">      </span><span class="nt">deployment_key_for_client_encrypted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ steps.set_outputs.outputs.deployment_key_for_client_encrypted }}</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@main</span>

<span class="w">      </span><span class="c1"># ...</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set outputs</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">set_outputs</span>
<span class="w">        </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">deployment_key_for_api="Method of obtaining this has been removed for simplicity..."</span>
<span class="w">          </span><span class="no">echo "::add-mask::$deployment_key_for_api"</span>
<span class="w">          </span><span class="no">deployment_key_for_api_encrypted=$(gpg --symmetric --batch --passphrase "$SECRET" --output - &lt;(echo "$deployment_key_for_api") | base64 -w0)</span>
<span class="w">          </span><span class="no">echo "::set-output name=deployment_key_for_api_encrypted::$deployment_key_for_api_encrypted"</span>

<span class="w">          </span><span class="no">deployment_key_for_client="Method of obtaining this has been removed for simplicity..."</span>
<span class="w">          </span><span class="no">echo "::add-mask::$deployment_key_for_client"</span>
<span class="w">          </span><span class="no">deployment_key_for_client_encrypted=$(gpg --symmetric --batch --passphrase "$SECRET" --output - &lt;(echo "$deployment_key_for_client") | base64 -w0)</span>
<span class="w">          </span><span class="no">echo "::set-output name=deployment_key_for_client_encrypted::$deployment_key_for_client_encrypted"</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">          </span><span class="nt">SECRET</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.PGP_SECRET_SIGNING_PASSPHRASE }}</span>

<span class="w">  </span><span class="nt">deploy-server</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Deploy</span><span class="nv"> </span><span class="s">Server"</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy-infrastructure</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">windows-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@main</span>

<span class="w">      </span><span class="c1"># ...</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Get Deploy Key</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get_deploy_key</span>
<span class="w">        </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">deployment_key=$(gpg --decrypt --quiet --batch --passphrase "$SECRET" --output - &lt;(echo "${{ needs.deploy-infrastructure.outputs.deployment_key_for_api_encrypted }}" | base64 --decode))</span>
<span class="w">          </span><span class="no">echo "::add-mask::$deployment_key"</span>
<span class="w">          </span><span class="no">echo "::set-output name=deployment_key::$deployment_key"</span>

<span class="w">      </span><span class="c1"># Uses ${{ steps.get_deploy_key.outputs.deployment_key }} later...</span>
</code></pre></div>
<h3 id="github-action-helper">
<span style="position:relative"><a class="anchor" href="#github-action-helper"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>GitHub Action Helper</span></h3>
<p>A couple years on, I had noticed that <a href="https://github.com/cloudposse/github-action-secret-outputs">github.com/cloudposse/github-action-secret-outputs</a> mentioned this post. This is a GitHub Action step that abstracts the encryption and decryption method I have described above.</p>
</div>
<nav class="blog-navigation-in-post text-center mb-5 mt-4">
<a class="btn btn-outline-primary mt-1" href="/blog/post/a-warning-for-ef-cores-datetimeoffsettobinaryconverter/" title="A Warning For EF Core's DateTimeOffsetToBinaryConverter">
<span>←</span>
<span class="btn-content">A Warning For EF Core's DateTimeOffsetToBinaryConverter</span>
</a>
<a class="btn btn-outline-primary mt-1" href="/blog/post/directory-structure-to-text/" title="Directory Structure to Text">
<span class="btn-content">Directory Structure to Text</span>
<span>→</span>
</a>
</nav>
<div id="disqus_thread"></div>
<script>
    var disqus_config = function() {
        this.page.url = 'https://nitratine.net/blog/post/how-to-pass-secrets-between-runners-in-github-actions/'; // Your page's canonical URL variable
        this.page.identifier = 'https://nitratine.net/blog/post/how-to-pass-secrets-between-runners-in-github-actions/'; // Your page's unique identifier variable
    };
    (function() {
        var d = document,
            s = d.createElement('script');
        s.src = '//nitratine.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</main>
<aside class="col-blog-sidebar blog-sidebar">
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">About</span>
<p class="mb-0">Owner of <a href="https://www.youtube.com/PyTutorials">PyTutorials</a> and creator of <a href="https://github.com/brentvollebregt/auto-py-to-exe">auto-py-to-exe</a>. I enjoy making quick tutorials for people new to particular topics in Python and tools that help fix small things.</p>
</div>
<div class="input-group mb-3">
<input aria-label="Search" class="form-control" id="sidebar-search" placeholder="Search" type="text"/>
<div class="input-group-append">
<button class="btn btn-outline-primary" id="sidebar-search-submit" type="button">Search</button>
</div>
</div>
<script>let searchUrl = "/search/";</script>
<script defer="" src="/static/js/search.js" type="text/javascript"></script>
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">Categories</span>
<ol class="list-unstyled mb-0 text-center text-lg-left">
<li>
<a href="/blog/categories/#Apps">📱 Apps
                        <span class="badge badge-primary ml-3">2</span>
</a>
</li>
<li>
<a href="/blog/categories/#General">📰 General
                        <span class="badge badge-primary ml-3">9</span>
</a>
</li>
<li>
<a href="/blog/categories/#Investigations">🔍 Investigations
                        <span class="badge badge-primary ml-3">2</span>
</a>
</li>
<li>
<a href="/blog/categories/#Projects">💾 Projects
                        <span class="badge badge-primary ml-3">15</span>
</a>
</li>
<li>
<a href="/blog/categories/#Snippets">✂ Snippets
                        <span class="badge badge-primary ml-3">1</span>
</a>
</li>
<li>
<a href="/blog/categories/#Tools">🛠 Tools
                        <span class="badge badge-primary ml-3">6</span>
</a>
</li>
<li>
<a href="/blog/categories/#Tutorials">📖 Tutorials
                        <span class="badge badge-primary ml-3">32</span>
</a>
</li>
<li>
<a href="/blog/categories/#YouTube">🎥 YouTube
                        <span class="badge badge-primary ml-3">15</span>
</a>
</li>
</ol>
</div>
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">PyTutorials on YouTube</span>
<script src="https://apis.google.com/js/platform.js"></script>
<div style="text-align: center">
<div class="g-ytsubscribe" data-channel="PrivateSplat" data-count="default" data-layout="full"></div>
</div>
</div>
<div class="card p-3 mb-3 bg-light">
<div class="featured-sites">
<a href="https://www.buymeacoffee.com/brentvollebregt">
<img alt="Buy Me A Coffee" src="/static/img/buy-me-a-coffee-black.png" style="max-height: 80px"/>
</a>
</div>
</div>
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">Latest Videos</span>
<div class="yt_video_container" id="recent-yt-videos">
<img alt="How to Encrypt Strings and Files in Python thumbnail" onclick="window.open('https://www.youtube.com/watch?v=H8t4DJ3Tdrg', '_blank')" src="https://img.youtube.com/vi/H8t4DJ3Tdrg/mqdefault.jpg" title="How to Encrypt Strings and Files in Python"/>
<img alt="Python GUI's with PyQt5 thumbnail" onclick="window.open('https://www.youtube.com/watch?v=ksW59gYEl6Q', '_blank')" src="https://img.youtube.com/vi/ksW59gYEl6Q/mqdefault.jpg" title="Python GUI's with PyQt5"/>
<img alt="How to Send Emails in Python thumbnail" onclick="window.open('https://www.youtube.com/watch?v=YPiHBtddefI', '_blank')" src="https://img.youtube.com/vi/YPiHBtddefI/mqdefault.jpg" title="How to Send Emails in Python"/>
<img alt="Python SQLite Basics thumbnail" onclick="window.open('https://www.youtube.com/watch?v=SQj17D1Q_6s', '_blank')" src="https://img.youtube.com/vi/SQj17D1Q_6s/mqdefault.jpg" title="Python SQLite Basics"/>
<img alt="Python GUI Using Chrome thumbnail" onclick="window.open('https://www.youtube.com/watch?v=2kbeBzEQfXE', '_blank')" src="https://img.youtube.com/vi/2kbeBzEQfXE/mqdefault.jpg" title="Python GUI Using Chrome"/>
<img alt="Python Threading Tutorial thumbnail" onclick="window.open('https://www.youtube.com/watch?v=5JSloPGocSY', '_blank')" src="https://img.youtube.com/vi/5JSloPGocSY/mqdefault.jpg" title="Python Threading Tutorial"/>
</div>
</div>
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">Featured Sites</span>
<div class="featured-sites">
<a href="https://emotionify.nitratine.net/" title="Emotionify">
<img alt="Emotionify" src="/static/img/featured-sites/emotionify.png">
</img></a>
<a href="https://spotify-lyrics-viewer.nitratine.net/" title="Spotify Lyrics Viewer">
<img alt="Spotify Lyrics Viewer" src="/static/img/featured-sites/spotify-lyrics-viewer.png">
</img></a>
<a href="https://monopoly-money.nitratine.net/" title="Monopoly Money">
<img alt="Monopoly Money" src="/posts/monopoly-money/banner.png">
</img></a>
</div>
</div>
</aside>
</div>
</div>
<footer class="bg-dark py-4 px-1">
<div class="container">
<div class="d-flex justify-content-center">
<div class="top-group">
<div class="link-group">
<p class="header">Navigate</p>
<a aria-current="page" class="" href="/">Home</a>
<a href="/blog/">Blog</a>
<a class="ml-2" href="/blog/categories/">Categories</a>
<a class="ml-2" href="/blog/tags/">Tags</a>
<a class="ml-2" href="/blog/archive/">Archive</a>
<a href="/portfolio/">Portfolio</a>
<a href="/about/">About</a>
</div>
<div class="link-group">
<p class="header">Popular Projects</p>
<a href="/blog/post/auto-py-to-exe/">auto-py-to-exe</a>
<a href="/blog/post/hit-counter/">hit-counter</a>
<a href="/blog/post/whos-on-my-network/">whos-on-my-network</a>
<a href="/blog/post/monopoly-money/">monopoly-money</a>
</div>
<div class="link-group expandable">
<p class="header">Follow</p>
<a class="with-icon" href="https://github.com/brentvollebregt">
<img alt="GitHub Logo" src="/static/img/icons/github.svg" style="filter: invert(1);">
                                GitHub
                            </img></a>
<a class="with-icon" href="https://www.youtube.com/c/PyTutorials">
<img alt="YouTube Logo" src="/static/img/icons/youtube.svg">
                                YouTube
                            </img></a>
<a class="with-icon" href="/rss.xml" rel="alternate" type="application/rss+xml">
<img alt="RSS Logo" src="/static/img/icons/rss.svg">
                                Nitratine RSS Feed
                            </img></a>
<div class="expand"></div>
<a class="with-icon" href="https://www.buymeacoffee.com/brentvollebregt" rel="alternate">
<span class="icon" style="align-self: baseline;">🍺</span>
                                Buy me a beer
                            </a>
</div>
</div>
</div>
<div class="mx-4">
<hr>
</hr></div>
<p class="text-center m-0">
<small>© 2025 Brent Vollebregt</small>
</p>
</div>
</footer>
<script crossorigin="anonymous" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>