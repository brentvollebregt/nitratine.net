<!DOCTYPE html>

<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="/static/img/favicon.ico" rel="shortcut icon"/>
<link href="/static/img/favicon-384x384.png" rel="icon" sizes="384x384" type="image/png"/>
<link href="/static/img/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><meta content="#343a40" name="theme-color"/><link href="https://nitratine.net/blog/post/how-to-detect-key-presses-in-python/" rel="canonical"/>
<link href="/rss.xml" rel="alternate" title="RSS Feed for nitratine.net" type="application/rss+xml"/>
<link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" rel="stylesheet"/>
<link href="/static/css/base.css" rel="stylesheet"/><!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EB27CZP773"></script>
<script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-EB27CZP773');
          gtag('config', 'UA-117153268-2');
        </script><!-- instant.page -->
<script defer="" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU" src="https://instant.page/1.2.2" type="module"></script>
<!-- lazysizes -->
<script async="" src="/static/js/lazysizes.min.js"></script>
<title>How to Detect Key Presses In Python - Nitratine</title>
<link href="/static/css/pygments.css" rel="stylesheet"/>
<meta content="This demonstration shows you how to detect key presses using the pynput module. These can then be logged to a file as no console is displayed. This is very similar to a key logger." name="description"/>
<meta content="Brent Vollebregt" name="author"/>
<meta content="How to Detect Key Presses In Python" property="og:title"/>
<meta content="This demonstration shows you how to detect key presses using the pynput module. These can then be logged to a file as no console is displayed. This is very similar to a key logger." property="og:description"/>
<meta content="/posts/how-to-detect-key-presses-in-python/demo2.png" property="og:image"/>
<meta content="https://nitratine.net/blog/post/how-to-detect-key-presses-in-python/" property="og:url"/>
<meta content="summary" name="twitter:card"/><script async="" data-ad-client="ca-pub-6407227183932047" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<link href="/static/css/blog.css" rel="stylesheet"/>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
<div class="container">
<a class="navbar-brand" href="/">
<img alt="Brand Icon" class="d-inline-block align-top" height="30" src="/static/img/logo.png" width="145"/>
</a>
<button aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbar" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse justify-content-between" id="navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item">
<a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
</li>
<li class="nav-item">
<a class="nav-link" href="/blog/">Blog</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://www.youtube.com/PyTutorials">YouTube</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://github.com/brentvollebregt">GitHub</a>
</li>
<li class="nav-item">
<a class="nav-link" href="/about/">About</a>
</li>
</ul>
</div>
</div>
</nav>
<!-- Main Content -->
<div class="container my-4">
<div class="row">
<main class="col-blog-content blog-main">
<h1 class="blog-post-title">How to Detect Key Presses In Python</h1>
<div class="mb-2">
<a class="text-muted" href="/blog/archive/#2020">7 Apr 2020</a>
<a class="badge badge-primary ml-2" href="/blog/categories/#Tutorials">Tutorials</a>
<a class="badge badge-warning" href="/blog/tags/#python">python</a>
<a class="badge badge-warning" href="/blog/tags/#keyboard">keyboard</a>
<a class="badge badge-warning" href="/blog/tags/#logging">logging</a>
<a class="badge badge-warning" href="/blog/tags/#pynput">pynput</a>
<span class="ml-2"></span>
<span class="text-muted text-nowrap">5 min read</span>
<span class="ml-2"></span>
<img alt="Hits" class="post-hits" src="https://hitcounternitratine.pythonanywhere.com/count/tag.svg?url=https%3A%2F%2Fnitratine.net%2Fblog%2Fpost%2Fhow-to-detect-key-presses-in-python%2F"/>
</div>
<p class="lead">This demonstration shows you how to detect key presses using the pynput module. These can then be logged to a file as no console is displayed. This is very similar to a key logger.</p>
<hr class="mt-3 mb-0"/>
<div class="post-content mt-3">
<div class="toc">
<ul>
<li><a href="#pip">PIP</a></li>
<li><a href="#installing-pynput">Installing Pynput</a></li>
<li><a href="#building-the-script">Building the Script</a></li>
<li><a href="#the-listener-thread">The Listener Thread</a></li>
<li><a href="#final-script">Final Script</a></li>
<li><a href="#making-things-a-bit-more-readable">Making Things a Bit More Readable</a></li>
<li><a href="#common-issues-and-questions">Common Issues and Questions</a><ul>
<li><a href="#modulenotfounderrorimporterror-no-module-named-pynput">ModuleNotFoundError/ImportError: No module named 'pynput'</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="pip">
<span style="position:relative"><a class="anchor" href="#pip"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>PIP</span></h2>
<p>If you haven't used or setup pip before, go to my tutorial at <a href="/blog/post/how-to-setup-pythons-pip/">how-to-setup-pythons-pip</a> to setup pip.</p>
<h2 id="installing-pynput">
<span style="position:relative"><a class="anchor" href="#installing-pynput"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Installing Pynput</span></h2>
<p>We will be using the pynput module to listen to keyboard events. To install this module execute <code>pip install pynput</code> in cmd. Watch the output to make sure no errors have occurred; it will tell you when the module has been successfully installed.</p>
<p><img alt="Installing pynput" class="lazyload blur-up" data-src="/posts/how-to-get-mouse-clicks-with-python/pynput1.png" height="163" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAwAAAACCAYAAABsfz2XAAAATUlEQVR4nAXBwQmAQAxFwZe4IqIHz4I1CNp/YWuS/c7YeV3K3vkiyAgqk6zCACEADGNUcT8vvvvMJuOYZpqMGEI4wxwxMXDUGiwrmckPwcAi4B3TeH4AAAAASUVORK5CYII=" style="; aspect-ratio: 989/163; height: auto;" width="989"/></p>
<p>To double-check that it was installed successfully, open up IDLE and execute the command <code>import pynput</code>; no errors should occur.</p>
<p><img alt="Testing pynput" class="lazyload blur-up" data-src="/posts/how-to-get-mouse-clicks-with-python/pynput2.png" height="150" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAA8AAAADCAYAAABMFFUxAAAAdklEQVR4nD3LOw6DMBQF0Xn28w8L9r8vFkIaNzHmpohENdJIx87z1LEfRHdyTkgAotYKgJkh6e1aC0l8rgsvOdO3xr0WOSXmfeOeCBawYH/0/FHKiVIKwYwxBt5rYd8y4/uw9Y6ZEWNkzkkIAQBJSMLd39da4wc2kzFKSqutqAAAAABJRU5ErkJggg==" style="; aspect-ratio: 760/150; height: auto;" width="760"/></p>
<h2 id="building-the-script">
<span style="position:relative"><a class="anchor" href="#building-the-script"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Building the Script</span></h2>
<p>Create a new python file and save it with a .py file extension. You will first want to import Listener from pynput.keyboard.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pynput.keyboard</span> <span class="kn">import</span> <span class="n">Listener</span>
</code></pre></div>
<p>Setup the listener by creating an instance in a <code>with</code> statement and using it's <code>.join()</code> method to join it to the main thread.</p>
<div class="codehilite"><pre><span></span><code><span class="k">with</span> <span class="n">Listener</span><span class="p">()</span> <span class="k">as</span> <span class="n">listener</span><span class="p">:</span>
    <span class="n">listener</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div>
<p>Create three methods; on_press and on_release with the parameters as shown below.</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
<p>Link these methods to the listener instance with the function names as the args; I have named the methods as they are defined in the listener class. Now when an action occurs, one of these methods will be run.</p>
<div class="codehilite"><pre><span></span><code><span class="k">with</span> <span class="n">Listener</span><span class="p">(</span><span class="n">on_press</span><span class="o">=</span><span class="n">on_press</span><span class="p">,</span> <span class="n">on_release</span><span class="o">=</span><span class="n">on_release</span><span class="p">)</span> <span class="k">as</span> <span class="n">listener</span><span class="p">:</span>
</code></pre></div>
<p>To make sure these are running, add some print statements to each method. Save and run the script. Press a few keys, you should see output like below.</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Key pressed"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Key released"</span><span class="p">)</span>
</code></pre></div>
<p><img alt="Keys pressed demonstration" class="lazyload blur-up" data-src="/posts/how-to-detect-key-presses-in-python/demo1.png" height="305" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAA8AAAAcCAYAAAC+lOV/AAADDUlEQVR4nH2U7W4bRRSGn5md/fBubKd2IpJGLmloBfQCENz/DSDED1SE2jStUBvFDqnXa+/OzvDjXddBAlay7PGec57zno8xr397HcvqJUUBaQZlCbsd9B5CgMRBjPrtOxhVUJUA4CJwv4Kuh9DD96/gj98hy6HrwGVAhLbV9+U3cowRnImB4ycy9h2kKZw/BWPADVTrwKD32xqchaoCR4w8PID34HuYn0LXwvIejipoGmh7cInIXQuLfO/sEsoU8hz6IMKogotSqU6PIUToO+keT6U5RnAA7Q7qjejzOby/gVGps3PS2HUiH0348rgYZDCqIAZIEjj7CtoO8kzZ2CGAb+HuFvoephNwGKXabGC7g7OnSqnZymG7g9ZD6g6ap7OBbEKgi5Bl6nMIEFGx2haqI6iGVoUezi7haNBsY4SikEOzUfTlEjqv9LpW2kMvG2sPmq11lnotgywHY2F2rCIWuZxChCRV4HdvYLka5iBimExlsKkVOc2hGBwcB81pJmKW7TU3f7HaQWIjLjX4DtZraa/XkBdggc3w38VC9YgRXMxKTo4hRkNdq1Xeq1BlddBXFKqBNTobA84kKR//VC/TVCMK8PlBxi4VpW21acVIoylyjJxfKNJ6rRm2Rr3cT5i1SjmEw2iKbODDDZhE5BAhS+HDe5iMYdNAtAroW7i5hsVzOJ0P+7x4puif1yKNp1CORZ7O1C5jZOO90la1gXfXgJG+s3O4X8LdCsZjreRjcuhhcQmjYiB/fakqrwfy7HSY36ignYfE6twHGE8eka/fQkCaZyfw9o2WpfMaDGNg26hgVy9UE1V7IDsHda0Xs7l0GXPoszGa8yJ/3OdBcz/clE9msLzTx+8vQGC7HS7AKxiNHpEXz5TypgHnIvMTqCrzD/L+NilG/0IOEWwC87nh7hZuP0qzy6R/24h29UKVjhFciJHvXjX0PlDXlk+fVlhn+PblOcYM5R5IMR722RhwiTX8+svP5GXFrqkxScZkXOLc+Zcx/K/HhQg//PgTDG3tvWe3a4fo/+MJ/A3H1259kHJ0LAAAAABJRU5ErkJggg==" style="; aspect-ratio: 163/305; height: auto;" width="163"/></p>
<p>Using these print statements and the parameters provided, we can give more information when printing. Run this again to make sure it is working properly (example output below).</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Key pressed: </span><span class="si">{0}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Key released: </span><span class="si">{0}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</code></pre></div>
<p><img alt="Keys pressed demonstration with data" class="lazyload blur-up" data-src="/posts/how-to-detect-key-presses-in-python/demo2.png" height="252" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAA8AAAAKCAYAAABrGwT5AAAA30lEQVR4nI2RTU7DQAyFP0+mTaKKloRLwP0P0x6iC6JKFJKZMYuXEIWy4G1s2X7+eTaAEOBy9vNzx+v9g+IQcoaug+sV+h6mkfJ0JBwOXMzsDSAyo6rATI0ccJfftlDX0DSAQ0qqc4ewkIurQYxKuMPnXaRhEKkUNviZbCiZ85psWtnTCXa7Ne4uG/gFs9VfVpymLWnBluzbghhFjPGx8WZtAAsSKc+3jV8S73aTHnUtAf+cXPK6qpnESkn3evnH5KqCNIs2jvDSK77f84Ateflz0u0pw/ugLxjKHbv1z98HlFZ8RKuXKAAAAABJRU5ErkJggg==" style="; aspect-ratio: 380/252; height: auto;" width="380"/></p>
<p>If you want this script to be run in the background. Click File -&gt; Save As and save it with a .pyw file extension. Now when it is run outside IDLE there will be no console window and it will not look like it is running. But to make sure the console doesn't appear, we need to first remove the print statements.</p>
<p>Import logging and set up the basic configuration as I have below. After that, change all print statements to logging.info.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">"key_log.txt"</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'</span><span class="si">%(asctime)s</span><span class="s1">: </span><span class="si">%(message)s</span><span class="s1">'</span><span class="p">)</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Key pressed: </span><span class="si">{0}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Key released: </span><span class="si">{0}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</code></pre></div>
<p>Now when the script is run, nothing should be printed to the console. This is because it is all being saved to the file declared in the basic configuration.</p>
<p>Save and close IDLE. Open the file named key_log.txt next to your python script; all the events should be logged in here. For example, here is one of my logs typing <code>Wow!</code>:</p>
<div class="codehilite"><pre><span></span><code>2020-04-07 22:52:58,233: Key pressed: Key.shift
2020-04-07 22:52:58,514: Key pressed: 'W'
2020-04-07 22:52:58,649: Key released: Key.shift
2020-04-07 22:52:58,649: Key released: 'w'
2020-04-07 22:52:58,942: Key pressed: 'o'
2020-04-07 22:52:59,058: Key released: 'o'
2020-04-07 22:52:59,205: Key pressed: 'w'
2020-04-07 22:52:59,318: Key released: 'w'
2020-04-07 22:52:59,430: Key pressed: Key.shift
2020-04-07 22:52:59,590: Key pressed: '!'
2020-04-07 22:52:59,710: Key released: '!'
2020-04-07 22:52:59,853: Key released: Key.shift
</code></pre></div>
<blockquote>
<p>The actual location of this file will be in the current working directory of where you run the script from</p>
</blockquote>
<h2 id="the-listener-thread">
<span style="position:relative"><a class="anchor" href="#the-listener-thread"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>The Listener Thread</span></h2>
<p>Just as a quick note, the Listener class is a thread which means as soon as it has joined to the main thread no code will be executed after the <code>.join()</code> until the Listener is stopped.</p>
<p>As stated <a href="https://pynput.readthedocs.io/en/latest/keyboard.html#monitoring-the-keyboard">here in the pynput docs on readthedocs.io</a>, we can call <code>pynput.keyboard.Listener.stop</code> anywhere in the script to stop the thread or return False from a callback to stop the listener. As shown in my video, we can also just call <code>listener.stop()</code> in one of the definitions due to the fact that that the listener is now in scope and is an instance os Listener.</p>
<h2 id="final-script">
<span style="position:relative"><a class="anchor" href="#final-script"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Final Script</span></h2>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pynput.keyboard</span> <span class="kn">import</span> <span class="n">Listener</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># Setup logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">"key_log.txt"</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'</span><span class="si">%(asctime)s</span><span class="s1">: </span><span class="si">%(message)s</span><span class="s1">'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>  <span class="c1"># The function that's called when a key is pressed</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Key pressed: </span><span class="si">{0}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>  <span class="c1"># The function that's called when a key is released</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Key released: </span><span class="si">{0}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

<span class="k">with</span> <span class="n">Listener</span><span class="p">(</span><span class="n">on_press</span><span class="o">=</span><span class="n">on_press</span><span class="p">,</span> <span class="n">on_release</span><span class="o">=</span><span class="n">on_release</span><span class="p">)</span> <span class="k">as</span> <span class="n">listener</span><span class="p">:</span>  <span class="c1"># Create an instance of Listener</span>
    <span class="n">listener</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>  <span class="c1"># Join the listener thread to the main thread to keep waiting for keys</span>
</code></pre></div>
<h2 id="making-things-a-bit-more-readable">
<span style="position:relative"><a class="anchor" href="#making-things-a-bit-more-readable"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Making Things a Bit More Readable</span></h2>
<p>Everything being on a new line with both key presses and releases can be very helpful for identifying sequences but can be a bit hard to read. Here is a modified script that can put everything on one line and enters when enter is pressed.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">pynput.keyboard</span> <span class="kn">import</span> <span class="n">Listener</span><span class="p">,</span> <span class="n">Key</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s2">"key_log.txt"</span>  <span class="c1"># The file to write characters to</span>


<span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">)</span>  <span class="c1"># Open the file</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s1">'char'</span><span class="p">):</span>  <span class="c1"># Write the character pressed if available</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Key</span><span class="o">.</span><span class="n">space</span><span class="p">:</span>  <span class="c1"># If space was pressed, write a space</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Key</span><span class="o">.</span><span class="n">enter</span><span class="p">:</span>  <span class="c1"># If enter was pressed, write a new line</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="n">Key</span><span class="o">.</span><span class="n">tab</span><span class="p">:</span>  <span class="c1"># If tab was pressed, write a tab</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># If anything else was pressed, write [&lt;key_name&gt;]</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'['</span> <span class="o">+</span> <span class="n">key</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">']'</span><span class="p">)</span>

    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># Close the file</span>


<span class="k">with</span> <span class="n">Listener</span><span class="p">(</span><span class="n">on_press</span><span class="o">=</span><span class="n">on_press</span><span class="p">)</span> <span class="k">as</span> <span class="n">listener</span><span class="p">:</span>  <span class="c1"># Setup the listener</span>
    <span class="n">listener</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>  <span class="c1"># Join the thread to the main thread</span>
</code></pre></div>
<p>Here is a sample of some of the output:</p>
<div class="codehilite"><pre><span></span><code>[shift]I am typing this in notepad
[shift]Here is a new line
[shift]Opps, [shift]I spelt that wro[backspace][backspace]ro[backspace][backspace]ord incorrectly
[shift]Here as [backspace][backspace]re some special keys[shift]:[shift][ctrl_l][alt_l][alt_r][ctrl_r][shift_r]
</code></pre></div>
<h2 id="common-issues-and-questions">
<span style="position:relative"><a class="anchor" href="#common-issues-and-questions"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Common Issues and Questions</span></h2>
<h3 id="modulenotfounderrorimporterror-no-module-named-pynput">
<span style="position:relative"><a class="anchor" href="#modulenotfounderrorimporterror-no-module-named-pynput"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>ModuleNotFoundError/ImportError: No module named 'pynput'</span></h3>
<p>Did you install pynput? This error will not occur if you installed it properly. If you have multiple versions of Python, make sure you are installing pynput on the same version as what you are running the script with.</p>
</div>
<nav class="blog-navigation-in-post text-center mb-5 mt-4">
<a class="btn btn-outline-primary mt-1" href="/blog/post/whos-on-my-network/" title="Who's On My Network">
<span>‚Üê</span>
<span class="btn-content">Who's On My Network</span>
</a>
<a class="btn btn-outline-primary mt-1" href="/blog/post/monopoly-money/" title="Monopoly Money">
<span class="btn-content">Monopoly Money</span>
<span>‚Üí</span>
</a>
</nav>
<div id="disqus_thread"></div>
<script>
    var disqus_config = function() {
        this.page.url = 'https://nitratine.net/blog/post/how-to-detect-key-presses-in-python/'; // Your page's canonical URL variable
        this.page.identifier = 'https://nitratine.net/blog/post/how-to-detect-key-presses-in-python/'; // Your page's unique identifier variable
    };
    (function() {
        var d = document,
            s = d.createElement('script');
        s.src = '//nitratine.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</main>
<aside class="col-blog-sidebar blog-sidebar">
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">About</span>
<p class="mb-0">Owner of <a href="https://www.youtube.com/PyTutorials">PyTutorials</a> and creator of <a href="https://github.com/brentvollebregt/auto-py-to-exe">auto-py-to-exe</a>. I enjoy making quick tutorials for people new to particular topics in Python and tools that help fix small things.</p>
</div>
<div class="input-group mb-3">
<input aria-label="Search" class="form-control" id="sidebar-search" placeholder="Search" type="text"/>
<div class="input-group-append">
<button class="btn btn-outline-primary" id="sidebar-search-submit" type="button">Search</button>
</div>
</div>
<script>let searchUrl = "/search/";</script>
<script defer="" src="/static/js/search.js" type="text/javascript"></script>
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">Categories</span>
<ol class="list-unstyled mb-0 text-center text-lg-left">
<li>
<a href="/blog/categories/#Apps">üì± Apps
                        <span class="badge badge-primary ml-3">2</span>
</a>
</li>
<li>
<a href="/blog/categories/#General">üì∞ General
                        <span class="badge badge-primary ml-3">9</span>
</a>
</li>
<li>
<a href="/blog/categories/#Investigations">üîç Investigations
                        <span class="badge badge-primary ml-3">2</span>
</a>
</li>
<li>
<a href="/blog/categories/#Projects">üíæ Projects
                        <span class="badge badge-primary ml-3">15</span>
</a>
</li>
<li>
<a href="/blog/categories/#Snippets">‚úÇ Snippets
                        <span class="badge badge-primary ml-3">1</span>
</a>
</li>
<li>
<a href="/blog/categories/#Tools">üõ† Tools
                        <span class="badge badge-primary ml-3">6</span>
</a>
</li>
<li>
<a href="/blog/categories/#Tutorials">üìñ Tutorials
                        <span class="badge badge-primary ml-3">32</span>
</a>
</li>
<li>
<a href="/blog/categories/#YouTube">üé• YouTube
                        <span class="badge badge-primary ml-3">15</span>
</a>
</li>
</ol>
</div>
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">PyTutorials on YouTube</span>
<script src="https://apis.google.com/js/platform.js"></script>
<div style="text-align: center">
<div class="g-ytsubscribe" data-channel="PrivateSplat" data-count="default" data-layout="full"></div>
</div>
</div>
<div class="card p-3 mb-3 bg-light">
<div class="featured-sites">
<a href="https://www.buymeacoffee.com/brentvollebregt">
<img alt="Buy Me A Coffee" src="/static/img/buy-me-a-coffee-black.png" style="max-height: 80px"/>
</a>
</div>
</div>
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">Latest Videos</span>
<div class="yt_video_container" id="recent-yt-videos">
<img alt="How to Encrypt Strings and Files in Python thumbnail" onclick="window.open('https://www.youtube.com/watch?v=H8t4DJ3Tdrg', '_blank')" src="https://img.youtube.com/vi/H8t4DJ3Tdrg/mqdefault.jpg" title="How to Encrypt Strings and Files in Python"/>
<img alt="Python GUI's with PyQt5 thumbnail" onclick="window.open('https://www.youtube.com/watch?v=ksW59gYEl6Q', '_blank')" src="https://img.youtube.com/vi/ksW59gYEl6Q/mqdefault.jpg" title="Python GUI's with PyQt5"/>
<img alt="How to Send Emails in Python thumbnail" onclick="window.open('https://www.youtube.com/watch?v=YPiHBtddefI', '_blank')" src="https://img.youtube.com/vi/YPiHBtddefI/mqdefault.jpg" title="How to Send Emails in Python"/>
<img alt="Python SQLite Basics thumbnail" onclick="window.open('https://www.youtube.com/watch?v=SQj17D1Q_6s', '_blank')" src="https://img.youtube.com/vi/SQj17D1Q_6s/mqdefault.jpg" title="Python SQLite Basics"/>
<img alt="Python GUI Using Chrome thumbnail" onclick="window.open('https://www.youtube.com/watch?v=2kbeBzEQfXE', '_blank')" src="https://img.youtube.com/vi/2kbeBzEQfXE/mqdefault.jpg" title="Python GUI Using Chrome"/>
<img alt="Python Threading Tutorial thumbnail" onclick="window.open('https://www.youtube.com/watch?v=5JSloPGocSY', '_blank')" src="https://img.youtube.com/vi/5JSloPGocSY/mqdefault.jpg" title="Python Threading Tutorial"/>
</div>
</div>
<div class="card p-3 mb-3 bg-light">
<span class="h4 text-center text-lg-left">Featured Sites</span>
<div class="featured-sites">
<a href="https://emotionify.nitratine.net/" title="Emotionify">
<img alt="Emotionify" src="/static/img/featured-sites/emotionify.png">
</img></a>
<a href="https://spotify-lyrics-viewer.nitratine.net/" title="Spotify Lyrics Viewer">
<img alt="Spotify Lyrics Viewer" src="/static/img/featured-sites/spotify-lyrics-viewer.png">
</img></a>
<a href="https://monopoly-money.nitratine.net/" title="Monopoly Money">
<img alt="Monopoly Money" src="/posts/monopoly-money/banner.png">
</img></a>
</div>
</div>
</aside>
</div>
</div>
<footer class="bg-dark py-4 px-1">
<div class="container">
<div class="d-flex justify-content-center">
<div class="top-group">
<div class="link-group">
<p class="header">Navigate</p>
<a aria-current="page" class="" href="/">Home</a>
<a href="/blog/">Blog</a>
<a class="ml-2" href="/blog/categories/">Categories</a>
<a class="ml-2" href="/blog/tags/">Tags</a>
<a class="ml-2" href="/blog/archive/">Archive</a>
<a href="/portfolio/">Portfolio</a>
<a href="/about/">About</a>
</div>
<div class="link-group">
<p class="header">Popular Projects</p>
<a href="/blog/post/auto-py-to-exe/">auto-py-to-exe</a>
<a href="/blog/post/hit-counter/">hit-counter</a>
<a href="/blog/post/whos-on-my-network/">whos-on-my-network</a>
<a href="/blog/post/monopoly-money/">monopoly-money</a>
</div>
<div class="link-group expandable">
<p class="header">Follow</p>
<a class="with-icon" href="https://github.com/brentvollebregt">
<img alt="GitHub Logo" src="/static/img/icons/github.svg" style="filter: invert(1);">
                                GitHub
                            </img></a>
<a class="with-icon" href="https://www.youtube.com/c/PyTutorials">
<img alt="YouTube Logo" src="/static/img/icons/youtube.svg">
                                YouTube
                            </img></a>
<a class="with-icon" href="/rss.xml" rel="alternate" type="application/rss+xml">
<img alt="RSS Logo" src="/static/img/icons/rss.svg">
                                Nitratine RSS Feed
                            </img></a>
<div class="expand"></div>
<a class="with-icon" href="https://www.buymeacoffee.com/brentvollebregt" rel="alternate">
<span class="icon" style="align-self: baseline;">üç∫</span>
                                Buy me a beer
                            </a>
</div>
</div>
</div>
<div class="mx-4">
<hr>
</hr></div>
<p class="text-center m-0">
<small>¬© 2025 Brent Vollebregt</small>
</p>
</div>
</footer>
<script crossorigin="anonymous" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>